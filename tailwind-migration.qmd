---
title: Tailwind Migration Dashboard - {{< fa flask >}} Unconfirmed (maybe inaccurate)
format:
  dashboard:
    logo: images/tailwindcss-mark.svg
    nav-buttons:
      - icon: github
        href: https://github.com/mcgaffin/composition-api-migration
        target: _parent
---

```{r setup}
source("R/github_utils.R")
```

```{r style-components}
# Vue components with <style> tags (not migrated to Tailwind)
style_results <- request_all_pages("<style", language = "Vue", path = "ui/src")

style_count <- style_results$count
style_components <- style_results$items |>
  map(get_names_from_git_response)
```

```{r all-vue-components}
# All Vue components using Composition API (script setup)
all_vue_results <- request_all_pages("script%20setup", language = "Vue", path = "ui/src")

all_vue_count <- all_vue_results$count
all_vue_items <- all_vue_results$items

# Filter out components with <style> to get Tailwind-migrated components
style_paths <- style_results$items |> map_chr(~.x$path)
tailwind_items <- all_vue_items |> keep(~!(.x$path %in% style_paths))

tailwind_count <- length(tailwind_items)
tailwind_components <- tailwind_items |>
  map(get_names_from_git_response)
```

## Row

```{r}
#| content: valuebox
#| title: "Migration Progress"
#| icon: speedometer
#| color: primary

glue('{calculate_progress(tailwind_count, style_count)}%')
```

```{r}
#| content: valuebox
#| title: "Tailwind Components"
#| icon: check-lg
#| color: success

tailwind_count
```

```{r}
#| content: valuebox
#| title: "SCSS Components"
#| icon: hourglass
#| color: warning

style_count
```

## Row {.tabset}

```{r}
#| title: "Tailwind Components"

tailwind_components |> render_table(column_name = "Components")
```

```{r}
#| title: "SCSS Components"

style_components |> render_table(column_name = "Components")
```
